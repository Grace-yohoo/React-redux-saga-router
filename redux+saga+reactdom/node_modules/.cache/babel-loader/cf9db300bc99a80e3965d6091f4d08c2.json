{"ast":null,"code":"import { put, takeEvery } from 'redux-saga/effects'; //put 与actiontype相同\n//Mysql 请求数据 (初始渲染  重置)\n\nfunction* fetchUser() {\n  const res = yield fetch('http://localhost:8080/');\n  const response = yield res.json();\n\n  for (let k in response) {\n    response[k].key = response[k].createdAt;\n  }\n\n  yield put({\n    type: \"fetch\",\n    payload: response\n  });\n}\n\nconst fetcha = (url, data) => {\n  fetch(url, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  }).then(res => res.json());\n}; //MYSQL 删除\n\n\nfunction* mysqlDelFectch(key) {\n  const createdAt = yield key.key;\n  yield fetcha('http://localhost:8080/delete', createdAt); // const response = yield fetchUser()\n  //重新请求数据\n\n  const res = yield fetch('http://localhost:8080/');\n  const response = yield res.json();\n\n  for (let k in response) {\n    response[k].key = response[k].createdAt;\n  }\n\n  yield put({\n    type: \"delete\",\n    payload: response\n  });\n} //MYSQL 添加\n\n\nfunction* mysqlAddFectch(val) {\n  const data = yield val.values;\n  yield fetcha('http://localhost:8080/add', data); //重新请求数据\n\n  const res = yield fetch('http://localhost:8080/');\n  const response = yield res.json();\n\n  for (let k in response) {\n    response[k].key = response[k].createdAt;\n    response[k].key = response[k].key + \"1\";\n  }\n\n  yield put({\n    type: 'create',\n    payload: response\n  });\n} //MYSQL 搜索\n\n\nfunction* mysqlSearchFectch(data) {\n  const name = yield data.value;\n  const res = yield fetch('http://localhost:8080/search', {\n    method: 'POST',\n    // or 'PUT'\n    body: JSON.stringify(name),\n    // data can be `string` or {object}!\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  });\n  const response = yield res.json();\n\n  for (let k in response) {\n    response[k].key = response[k].createdAt;\n    response[k].key = response[k].key + \"1\";\n  }\n\n  yield put({\n    type: 'create',\n    payload: response\n  });\n} //MYSQL 修改\n\n\nfunction* mysqlSaveFectch(val) {\n  const data = yield val.row;\n  yield console.log(data);\n  yield fetch('http://localhost:8080/change', {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  }); //重新请求数据\n\n  const res = yield fetch('http://localhost:8080/');\n  const response = yield res.json();\n\n  for (let k in response) {\n    response[k].key = response[k].createdAt;\n    response[k].key = response[k].key + \"1\";\n  }\n\n  yield put({\n    type: 'save',\n    payload: response\n  });\n} //监听与组件type相同\n\n\nfunction* mySaga() {\n  yield takeEvery(\"feh\", fetchUser);\n  yield takeEvery('del', mysqlDelFectch);\n  yield takeEvery('add', mysqlAddFectch);\n  yield takeEvery('sear', mysqlSearchFectch);\n  yield takeEvery('sav', mysqlSaveFectch);\n}\n\nexport default mySaga;","map":{"version":3,"sources":["/home/grace/test/redux+saga+reactdom/src/saga/index.js"],"names":["put","takeEvery","fetchUser","res","fetch","response","json","k","key","createdAt","type","payload","fetcha","url","data","method","body","JSON","stringify","headers","Headers","then","mysqlDelFectch","mysqlAddFectch","val","values","mysqlSearchFectch","name","value","mysqlSaveFectch","row","console","log","mySaga"],"mappings":"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","sourcesContent":["\nimport { put, takeEvery } from 'redux-saga/effects'\n\n\n//put 与actiontype相同\n//Mysql 请求数据 (初始渲染  重置)\nfunction* fetchUser() {\n       const res =  yield fetch('http://localhost:8080/')\n\n       const response = yield res.json()\n       for (let k in response){\n        response[k].key = response[k].createdAt\n\n       }\n      \n       yield put({type: \"fetch\", payload:response});\n    \n}\n\nconst fetcha = (url,data) => {\n  fetch(url,{\n    method: 'POST', \n    body: JSON.stringify(data),\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  })\n  .then(res => res.json())\n}\n\n//MYSQL 删除\nfunction* mysqlDelFectch(key){\n  const createdAt = yield key.key\n  yield fetcha('http://localhost:8080/delete',createdAt)\n  // const response = yield fetchUser()\n  //重新请求数据\n  const res =  yield fetch('http://localhost:8080/')\n\n  const response = yield res.json()\n  for (let k in response){\n        response[k].key = response[k].createdAt\n\n  }\n\n\n  yield put({type: \"delete\", payload:response});\n}\n\n//MYSQL 添加\nfunction* mysqlAddFectch(val){\n      const data = yield val.values\n      \n      yield fetcha('http://localhost:8080/add',data)\n\n      //重新请求数据\n      const res =  yield fetch('http://localhost:8080/')\n\n      const response = yield res.json()\n      for (let k in response){\n            response[k].key = response[k].createdAt\n            response[k].key = response[k].key + \"1\"\n            \n      }\n\n\n      yield put ({type:'create' ,payload:response})\n\n}\n\n//MYSQL 搜索\nfunction* mysqlSearchFectch(data){\n      const name = yield data.value\n      const res = yield fetch('http://localhost:8080/search', {\n            method: 'POST', // or 'PUT'\n            body: JSON.stringify(name), // data can be `string` or {object}!\n            headers: new Headers({\n              'Content-Type': 'application/x-www-form-urlencoded'\n            })\n          })\n      const response = yield res.json()\n      for (let k in response){\n        response[k].key = response[k].createdAt\n        response[k].key = response[k].key + \"1\"\n      }\n\n\n      yield put ({type:'create' ,payload:response})\n\n}\n\n//MYSQL 修改\nfunction* mysqlSaveFectch(val){\n  const data = yield val.row\n  yield console.log(data)\n  yield fetch('http://localhost:8080/change', {\n    method: 'POST', \n    body: JSON.stringify(data), \n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  })\n    //重新请求数据\n    const res =  yield fetch('http://localhost:8080/')\n\n    const response = yield res.json()\n    for (let k in response){\n          response[k].key = response[k].createdAt\n          response[k].key = response[k].key + \"1\"\n    }\n  \n    yield put({type:'save',payload:response})\n\n}\n\n\n//监听与组件type相同\n function* mySaga() {\n   yield takeEvery(\"feh\", fetchUser);\n   yield takeEvery('del', mysqlDelFectch)\n   yield takeEvery('add', mysqlAddFectch)\n   yield takeEvery('sear', mysqlSearchFectch)\n   yield takeEvery('sav', mysqlSaveFectch)\n\n\n }\n\n \n export default mySaga;\n\n"]},"metadata":{},"sourceType":"module"}
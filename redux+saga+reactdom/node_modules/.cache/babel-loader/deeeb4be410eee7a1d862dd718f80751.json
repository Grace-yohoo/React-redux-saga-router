{"ast":null,"code":"import { put, takeEvery } from 'redux-saga/effects'; //put 与actiontype相同\n//Mysql 请求数据\n\nfunction* fetchUser() {\n  const res = yield fetch('http://localhost:8080/');\n  const response = yield res.json();\n\n  for (let k in response) {\n    response[k].key = response[k].createdAt;\n  }\n\n  yield put({\n    type: \"fetch\",\n    payload: response\n  });\n} //MYSQL 删除\n\n\nfunction* mysqlDelfectch(key) {\n  const createdAt = yield key.key;\n  yield fetch('http://localhost:8080/delete', {\n    method: 'POST',\n    body: JSON.stringify(createdAt),\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  }); // const response = yield fetchUser()\n  //重新请求数据\n\n  const res = yield fetch('http://localhost:8080/');\n  const response = yield res.json();\n\n  for (let k in response) {\n    response[k].key = response[k].createdAt;\n  }\n\n  yield put({\n    type: \"delete\",\n    payload: response\n  });\n} //MYSQL 添加\n\n\nfunction* mysqlAddFetch(row) {\n  const data = yield row.data;\n  const response = yield fetch('http://localhost:8080/add', {\n    method: 'POST',\n    // or 'PUT'\n    body: JSON.stringify(data),\n    // data can be `string` or {object}!\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  });\n  yield put({\n    type: 'create',\n    payload: response\n  });\n} //监听与组件type相同\n\n\nfunction* mySaga() {\n  yield takeEvery(\"feh\", fetchUser);\n  yield takeEvery('del', mysqlDelfectch);\n  yield takeEvery('add', mysqlAddFetch);\n}\n\nexport default mySaga;","map":{"version":3,"sources":["/home/grace/test/redux/src/saga/index.js"],"names":["put","takeEvery","fetchUser","res","fetch","response","json","k","key","createdAt","type","payload","mysqlDelfectch","method","body","JSON","stringify","headers","Headers","mysqlAddFetch","row","data","mySaga"],"mappings":"AACA,SAASA,GAAT,EAAcC,SAAd,QAA+B,oBAA/B,C,CAGA;AACA;;AACA,UAAUC,SAAV,GAAsB;AACf,QAAMC,GAAG,GAAI,MAAMC,KAAK,CAAC,wBAAD,CAAxB;AAEA,QAAMC,QAAQ,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAvB;;AACA,OAAK,IAAIC,CAAT,IAAcF,QAAd,EAAuB;AACtBA,IAAAA,QAAQ,CAACE,CAAD,CAAR,CAAYC,GAAZ,GAAkBH,QAAQ,CAACE,CAAD,CAAR,CAAYE,SAA9B;AACA;;AAED,QAAMT,GAAG,CAAC;AAACU,IAAAA,IAAI,EAAE,OAAP;AAAgBC,IAAAA,OAAO,EAACN;AAAxB,GAAD,CAAT;AAEN,C,CAGD;;;AACA,UAAUO,cAAV,CAAyBJ,GAAzB,EAA6B;AAC3B,QAAMC,SAAS,GAAG,MAAMD,GAAG,CAACA,GAA5B;AACA,QAAMJ,KAAK,CAAC,8BAAD,EAAgC;AACzCS,IAAAA,MAAM,EAAE,MADiC;AAEzCC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,SAAf,CAFmC;AAGzCQ,IAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,sBAAgB;AADG,KAAZ;AAHgC,GAAhC,CAAX,CAF2B,CAU3B;AACA;;AACA,QAAMf,GAAG,GAAI,MAAMC,KAAK,CAAC,wBAAD,CAAxB;AAEA,QAAMC,QAAQ,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAvB;;AACA,OAAK,IAAIC,CAAT,IAAcF,QAAd,EAAuB;AACjBA,IAAAA,QAAQ,CAACE,CAAD,CAAR,CAAYC,GAAZ,GAAkBH,QAAQ,CAACE,CAAD,CAAR,CAAYE,SAA9B;AACL;;AAGD,QAAMT,GAAG,CAAC;AAACU,IAAAA,IAAI,EAAE,QAAP;AAAiBC,IAAAA,OAAO,EAACN;AAAzB,GAAD,CAAT;AACD,C,CAED;;;AACA,UAAUc,aAAV,CAAwBC,GAAxB,EAA4B;AAC1B,QAAMC,IAAI,GAAG,MAAMD,GAAG,CAACC,IAAvB;AAEA,QAAMhB,QAAQ,GAAG,MAAMD,KAAK,CAAC,2BAAD,EAA8B;AACpDS,IAAAA,MAAM,EAAE,MAD4C;AACpC;AAChBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeK,IAAf,CAF8C;AAExB;AAC5BJ,IAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,sBAAgB;AADG,KAAZ;AAH2C,GAA9B,CAA5B;AAQA,QAAMlB,GAAG,CAAE;AAACU,IAAAA,IAAI,EAAC,QAAN;AAAgBC,IAAAA,OAAO,EAACN;AAAxB,GAAF,CAAT;AAED,C,CAGD;;;AACC,UAAUiB,MAAV,GAAmB;AACjB,QAAMrB,SAAS,CAAC,KAAD,EAAQC,SAAR,CAAf;AACA,QAAMD,SAAS,CAAC,KAAD,EAAQW,cAAR,CAAf;AACA,QAAMX,SAAS,CAAC,KAAD,EAAQkB,aAAR,CAAf;AAGD;;AAGD,eAAeG,MAAf","sourcesContent":["\nimport { put, takeEvery } from 'redux-saga/effects'\n\n\n//put 与actiontype相同\n//Mysql 请求数据\nfunction* fetchUser() {\n       const res =  yield fetch('http://localhost:8080/')\n\n       const response = yield res.json()\n       for (let k in response){\n        response[k].key = response[k].createdAt\n       }\n      \n       yield put({type: \"fetch\", payload:response});\n    \n}\n\n\n//MYSQL 删除\nfunction* mysqlDelfectch(key){\n  const createdAt = yield key.key\n  yield fetch('http://localhost:8080/delete',{\n    method: 'POST', \n    body: JSON.stringify(createdAt),\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    })\n  })\n  \n  // const response = yield fetchUser()\n  //重新请求数据\n  const res =  yield fetch('http://localhost:8080/')\n\n  const response = yield res.json()\n  for (let k in response){\n        response[k].key = response[k].createdAt\n  }\n\n\n  yield put({type: \"delete\", payload:response});\n}\n\n//MYSQL 添加\nfunction* mysqlAddFetch(row){\n  const data = yield row.data\n\n  const response = yield fetch('http://localhost:8080/add', {\n        method: 'POST', // or 'PUT'\n        body: JSON.stringify(data), // data can be `string` or {object}!\n        headers: new Headers({\n          'Content-Type': 'application/x-www-form-urlencoded'\n        })\n\n      })\n  yield put ({type:'create' ,payload:response})\n\n}\n\n\n//监听与组件type相同\n function* mySaga() {\n   yield takeEvery(\"feh\", fetchUser);\n   yield takeEvery('del', mysqlDelfectch)\n   yield takeEvery('add', mysqlAddFetch)\n\n\n }\n\n \n export default mySaga;\n\n"]},"metadata":{},"sourceType":"module"}